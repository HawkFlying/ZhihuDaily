apply plugin: 'com.android.application'
apply plugin: 'me.tatarka.retrolambda'
apply plugin: 'android-apt'

android {
    def cfg = rootProject.ext.androidVersionConfig

    compileSdkVersion cfg.androidCompileSdkVersion
    buildToolsVersion cfg.androidBuildToolsVersion

    defaultConfig {
        minSdkVersion cfg.androidMinSdkVersion
        targetSdkVersion cfg.androidTargetSdkVersion
        versionCode cfg.versionCode as int
        versionName cfg.versionName
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }

        debug {
            minifyEnabled false
        }
    }

    compileOptions {
        sourceCompatibility rootProject.ext.javaSourceCompatibility as JavaVersion
        targetCompatibility rootProject.ext.javaTargetCompatibility as JavaVersion
    }

    sourceSets {
        main {
            java.srcDirs = ['src/main/java', 'src/main/java-gen']
        }
    }
}

dependencies {
    testCompile 'junit:junit:4.12'
    compile fileTree(dir: 'libs', include: ['*.jar'])

    def support = rootProject.ext.support

    compile support.appcompat as String
    compile support.design as String
    compile support.recyclerView as String
    compile support.cardView as String

    def rx = rootProject.ext.rx;
    compile rx.rxJava as String
    compile rx.rxAndroid as String
    compile rx.rxLifecycle as String
    compile rx.rxLlifecycleComponents as String
    compile rx.rxBinding as String

    def majorFrame = rootProject.ext.majorFrame
    compile majorFrame.okHttp as String
    compile majorFrame.loggingInterceptor as String

    compile majorFrame.retrofit as String
    compile majorFrame.converterGson as String
    compile majorFrame.adapterRxJava as String

    compile majorFrame.Gson as String
    compile majorFrame.Glide as String

    compile majorFrame.ButterKnife as String
    apt majorFrame.aptButterKnifeCompiler as String

    compile majorFrame.Dagger2 as String
    apt majorFrame.aptDagger2Compiler as String


    def assistance = rootProject.ext.assistance;
    debugCompile assistance.leakCanaryDebug as String
    releaseCompile assistance.leakCanaryRelease as String
    testCompile assistance.leakCanaryTest as String

    debugCompile assistance.stetho as String
    debugCompile assistance.stethoOkHttp as String
    releaseCompile project(':lib_component:Stetho')

    debugCompile project(':lib_component:LogUtil')
    releaseCompile project(':lib_component:LogUtilRelease')

    //bug捕捉
    debugCompile project(':lib_component:CrashWoodpecker')
    releaseCompile project(':lib_component:CrashWoodpeckerRelease')

    compile project(':lib_uikit:tsnackbar')
    compile project(':lib_uikit:stickyHeaderRecyclerView')
    compile project(':lib_uikit:ptr_lib')


    //数据库
    compile 'de.greenrobot:greendao:2.1.0'
}
